<mat-grid-list [cols]="(isHandset$ | async) ? '1' : '4'" rowHeight="56px" [class.margin-grid]="!(isHandset$ | async)">
  <mat-grid-tile *ngFor="let room of rooms" [colspan]="1" [rowspan]="room.devices.length+1">

    <mat-card class="room-card" [style.margin]="(isHandset$ | async) ? '0px' : '5px'">
      <mat-card-header>
        <mat-card-title style="margin-top: 5px; font-size: 15px" *ngIf="roomToRename!=room">
          {{room.name}}
        </mat-card-title>

        <mat-card-subtitle *ngIf="roomToRename!=room">{{room.devices.length}} devices</mat-card-subtitle>

        <mat-form-field class="example-form-field" *ngIf="roomToRename==room">
          <input matInput type="text" placeholder="Rename" [(ngModel)]="room.name" (focusout)="editRoomName()">
          <button mat-button *ngIf="room.name" matSuffix mat-icon-button aria-label="Clear" (click)="editRoomName()">
            <mat-icon>mode_edit</mat-icon>
          </button>
        </mat-form-field>

        <button mat-icon-button style="position: absolute;right: 0;top: 8px" [matMenuTriggerFor]="roomMenu">
          <mat-icon aria-label="more options icon">more_vert</mat-icon>
        </button>

        <mat-menu #roomMenu="matMenu">
          <button mat-menu-item>
            <span>Add device</span>
          </button>
          <button mat-menu-item (click)="editRoomName(room)">
            <span>Rename</span>
          </button>
        </mat-menu>

      </mat-card-header>

      <mat-card-content [style.background]="room.color">
        <mat-list role="list">
          <mat-divider></mat-divider>
          <mat-list-item role="listitem" class="list-row" *ngFor="let device of room.devices" [ngSwitch]="device.type.name">
            <mat-divider></mat-divider>
            <mat-icon mat-list-icon *ngIf="device.type.icon">{{device.type.icon}}</mat-icon>
            <p mat-line>{{device.name}}</p>
            <!-- device status display -->
            <mat-slide-toggle *ngSwitchCase="'light'" color="primary"></mat-slide-toggle>
            <p *ngSwitchCase="'door'">{{device.status}}</p>
            <p *ngSwitchCase="'temperature'">14ÂºC</p>
            <p *ngSwitchCase="'occupancy'">No</p>
            <mat-slide-toggle *ngSwitchCase="'power'" color="primary"></mat-slide-toggle>
            <!-- end device status display -->
          </mat-list-item>
        </mat-list>
      </mat-card-content>
    </mat-card>

  </mat-grid-tile>
</mat-grid-list>